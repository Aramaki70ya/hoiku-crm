# CSVデータファイル一覧

このディレクトリには、Supabaseへのデータ移行に使用する元データCSVファイルを格納します。

## ファイル構成

### 基本データ

#### `candidates-contact-list.csv`
- **説明**: 求職者管理 連絡先一覧
- **ソース**: `元データ/求職者管理 - 連絡先一覧.csv`
- **対象テーブル**: `candidates`
- **主要カラム**: 
  - ID, 氏名, 電話番号, メールアドレス, 生年月日, 年齢
  - 都道府県, 市区町村, 正・パ, 保有資格, 応募職種
  - 担当者, 媒体, ステータス, 登録日
- **データ件数**: 約1,200件

### 成約データ

#### `contracts-2025-10.csv`
- **説明**: 成約データ 2025年10月
- **ソース**: `元データ/成約2025_10.csv`
- **対象テーブル**: `contracts`
- **主要カラム**: 
  - ID, 承諾日, 氏名, 経由, 担当, 雇用, 職種
  - 入金, 売上(税抜), 売上(税込), 請求書発送, 算出根拠, 入職先
- **データ件数**: 約10-15件/月

#### `contracts-2025-11.csv`
- **説明**: 成約データ 2025年11月
- **ソース**: `元データ/成約2025_11.csv`
- **対象テーブル**: `contracts`
- **備考**: 上記と同様の構造

#### `contracts-2025-12.csv`
- **説明**: 成約データ 2025年12月
- **ソース**: `元データ/成約2025_12.csv`
- **対象テーブル**: `contracts`
- **備考**: 上記と同様の構造

### 数値管理シート（担当者別）

各担当者の数値管理シートから、以下の情報を抽出します：
- **案件情報** (`projects`テーブル): 園名、法人名、ヨミ金額、確度、フェーズ
- **面接情報** (`interviews`テーブル): 面接日、面接フラグ、面接希望までの日数

#### `consultant-metrics-takizawa.csv`
- **説明**: 数値管理シート 瀧澤
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 瀧澤.csv`
- **対象テーブル**: `projects`, `interviews`
- **主要カラム**: 
  - 求職者名, リード獲得先, ステータス, ヨミ金額(MIN)
  - ヨミ確度(当月), ヨミ確度(翌月), 成約金額
  - 面接フラグ, 面接フラグ日, 面接希望までの日数, 成約日
  - エリア, 面接日, 職種, 入職時期, 園名, 法人名, 併願

#### `consultant-metrics-nishida.csv`
- **説明**: 数値管理シート 西田
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 西田.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-suzuki.csv`
- **説明**: 数値管理シート 鈴木
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 鈴木.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-tobe.csv`
- **説明**: 数値管理シート 戸部
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 戸部.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-goto.csv`
- **説明**: 数値管理シート 後藤
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 後藤.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-koaze.csv`
- **説明**: 数値管理シート 小畦
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 小畦.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-yoshida.csv`
- **説明**: 数値管理シート 吉田
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 吉田.csv`
- **対象テーブル**: `projects`, `interviews`

#### `consultant-metrics-otsuka.csv`
- **説明**: 数値管理シート 大塚
- **ソース**: `元データ/【保育】数値管理シート_最新版 - 大塚.csv`
- **対象テーブル**: `projects`, `interviews`

## データ移行の順序

1. **マスターデータ**: `sources`, `users`
2. **基本データ**: `candidates` (candidates-contact-list.csv)
3. **関連データ**: 
   - `projects` (各担当者の数値管理シートから)
   - `interviews` (各担当者の数値管理シートから)
   - `contracts` (成約データから)

## 注意事項

### データの正規化
- 同じ求職者が複数CSVに存在する場合、最新データを優先
- 外部キー解決（氏名→ID、媒体名→ID）を確実に実施

### データ型変換
- 日付: `2025/10/10` → `2025-10-10`
- 数値: `"687,600"` → `687600`
- 電話番号: ハイフン除去等の正規化

### エラーハンドリング
- ID重複時の処理
- 外部キー参照エラー時の処理
- データ欠損時の処理

## ファイル移動手順

元データディレクトリからこのディレクトリへファイルを移動する際は、以下の命名規則に従ってください：

```
元データ/求職者管理 - 連絡先一覧.csv
  → data/csv/candidates-contact-list.csv

元データ/成約2025_10.csv
  → data/csv/contracts-2025-10.csv

元データ/【保育】数値管理シート_最新版 - 瀧澤.csv
  → data/csv/consultant-metrics-takizawa.csv
```

## 関連ドキュメント

- [データ定義書](../DATA_DEFINITION.md)
- [スプレッドシート移行ガイド](../SPREADSHEET_MIGRATION.md)
- [データベース設計書](../DATABASE_DESIGN.md)
