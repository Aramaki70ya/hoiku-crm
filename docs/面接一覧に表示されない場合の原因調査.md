# 面接一覧に表示されない場合の原因調査

求職者メモ（求職者詳細）から「面接予定を登録」したのに、面接一覧に表示されないときの確認ポイントです。

---

## 1. 表示「月」を確認する

**面接一覧は「選択した月」の面接だけを表示します。初期表示は「今月」です。**

- 登録した面接日が **来月・先月** の場合、一覧の **月プルダウン** でその月を選ぶと表示されます。
- 求職者詳細で面接登録に成功すると、「面接一覧で ○○年○月 を選択すると表示されます」という案内と **「面接一覧で確認」** リンクが出ます。このリンクから開くと、登録した面接の月が自動で選ばれた状態で面接一覧が開きます。

**確認手順**

1. 面接一覧の **年月** のプルダウンで、登録した面接日と同じ月を選択する。
2. まだ出てこない場合は、担当者フィルタを確認する（下記）。

---

## 2. 担当者フィルタを確認する

面接一覧で **担当者** を「すべて」以外（特定の担当者）にしていると、**その担当者に紐づく求職者の面接だけ** が表示されます。

- 登録した求職者に **担当者が未設定** の場合、「〇〇担当」で絞ると一覧に出ません。
- 担当者が **別の担当者** になっている場合も、現在選んでいる担当者では出ません。

**確認手順**

1. 担当者を **「すべて」** にした状態で、該当する **月** を選び直す。
2. 表示されたら、その求職者の担当者設定を確認する（求職者詳細 or 一覧で担当者を設定・修正）。

---

## 3. 想定原因の整理

| 状況 | 想定原因 | 対処 |
|------|----------|------|
| 面接日が来月・先月だった | 一覧の表示月が「今月」のまま | 月プルダウンで登録した面接の月を選択する。登録成功後の「面接一覧で確認」リンクを使うとその月で開く。 |
| 担当者で絞っている | その求職者の担当が未設定 or 別の担当 | 担当者を「すべて」にする。必要なら求職者に担当者を設定する。 |
| 登録直後で一覧を開いていない | 表示月が違う | 求職者詳細の「面接一覧で確認」から開くか、手動で該当月を選ぶ。 |

---

## 4. 技術メモ（開発者向け）

- 面接一覧 API は `GET /api/interviews?month=YYYY-MM` で、`interviews.start_at` がその月の範囲のレコードだけを返します。
- 担当者フィルタは、取得後に `project.candidate.consultant_id` でクライアント側で絞り込んでいます（API の `consultant_id` パラメータでもサーバー側フィルタあり）。
- 求職者詳細から面接登録時は、案件（project）作成後に `POST /api/interviews` で面接を登録し、`start_at` に画面で入力した面接日時をそのまま送っています。
