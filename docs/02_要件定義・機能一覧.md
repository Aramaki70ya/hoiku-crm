# 要件定義・機能一覧

## 1. ユーザーロール
*   **管理者 (Admin)**: 全データの閲覧・編集、マスタ管理、ダッシュボード分析。
*   **コンサルタント (User)**: 担当求職者の管理、進捗更新、面接設定。

## 2. 画面一覧と機能

### A. ログイン (Login)
*   **認証**: Email/Password（必要に応じてGoogle OAuth）
*   **セッション管理**: 認証後はAPIアクセスにセッションを使用

### B. ダッシュボード (Dashboard)
*   **KPI表示**: 今月の面接設定数、成約数、売上見込み（ヨミ）、新規登録数。
*   **アラート**: 対応期限切れ、ステータス停滞のアラート表示。
*   **カレンダー**: 直近の面接・面談予定一覧。

### C. 求職者管理 (Candidates)
*   **求職者一覧 (List View)**
    *   検索・絞り込み（氏名、ID、電話番号、ステータス、資格、住所）。
    *   カスタムカラム表示。
*   **カンバンボード (Kanban View)**
    *   ステータス（未対応→連絡中→面談済→案件提案→面接→内定）ごとのカード表示。
    *   ドラッグ＆ドロップでのステータス変更。
*   **求職者詳細 (Detail View)**
    *   **基本情報タブ**: 連絡先、経歴、希望条件（マスタデータ）。
    *   **タイムラインタブ**: 過去の活動履歴（面談ログ、メール送信履歴、ステータス変更ログ）。
    *   **選考管理タブ**: 応募中の園、面接日程、結果。
    *   **ファイル添付**: 履歴書・職務経歴書のアップロード/プレビュー。

### D. 案件・進捗管理 (Pipeline)
*   **案件登録**: 求職者と法人・園を紐づけた「案件」の作成（園名/法人名を分けて登録）。
*   **選考プロセス管理**: 書類選考 → 1次面接 → 2次面接 → 内定 → 入社 の進捗管理。
*   **面接設定**: 日時、場所、同行有無、Zoom URL等の管理。

### E. マスタ管理 (Settings)
*   **ユーザー管理**: コンサルタントの追加・編集（管理者のみ）。
*   **媒体マスタ**: 流入経路（媒体名）の管理。
*   **法人・園データベース**: （別プロジェクト `07_J-portal` との連携を見据えた）提案先リスト。
*   **月次目標設定**: 月ごとの全体売上目標とメンバー別目標（売上予算、面接設定目標、成約件数目標）を設定。

### F. 月次目標設定 (Monthly Targets)
*   **全体目標管理**: 月単位で全体の売上予算、KPI目標値（登録→初回率、初回→面接率、面接→成約率、成約単価）、面接設定目標を設定。
*   **メンバー別目標管理**: 各コンサルタント（管理者を除く）に対して、月単位で以下の目標を設定:
    *   売上予算（円）
    *   面接設定目標（件数）
    *   成約件数目標（件数）
*   **月選択機能**: 設定画面で年月（YYYY-MM）を選択し、該当月の目標を編集可能。
*   **一括保存**: メンバー別目標は一括で保存（全員分をまとめて更新）。

## 3. 非機能要件
*   **レスポンシブ対応**: PCでの操作を主とするが、出先からスマホでの閲覧も可能にする。
*   **速度**: 数千件のデータがあっても高速に検索・表示できること。
*   **セキュリティ**: 個人情報（PII）を扱うため、適切なアクセス制御を行う。
*   **認証/認可**: Supabase Authで認証し、`users`テーブルのロールで権限管理する。

## 4. 既存CSVからのマッピング方針
現状の入力項目が多岐にわたるため、以下のように整理する。

*   **基本属性**: 氏名、生年月日、住所、電話、メール → `Candidates` テーブル
*   **業務ステータス**: 担当者、ステータス、優先度、ヨミ → `Projects` または `Candidates` テーブル
*   **イベント**: 面接日、面接内容、結果 → `Interviews` テーブル

